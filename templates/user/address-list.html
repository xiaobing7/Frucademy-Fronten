{% extends "user/layout.html" %}
{% block title %}
    {{ super() }}
{% endblock %}
{% block head_link %}
    {{ super() }}
{% endblock %}
{% block head_css %}
    {{ super() }}
    <style type="text/css">
        #address-list {
            margin-top: 45px;
        }
    </style>
{% endblock %}
{% block head_after_link %}
    {{ super() }}
{% endblock %}
{% block head_src %}
    {{ super() }}
{% endblock %}
{% block head_js %}
    {{ super() }}
{% endblock %}
{% block body_header %}
    {{ super() }}
    <header class="ui-header ui-header-positive ui-border-b">
        <i class="ui-icon-return" onclick="go_back();"></i><h1>收货地址列表</h1>
    </header>
{% endblock %}
{% block body_main %}
    {{ super() }}
    <ul id="address-list" class="ui-list ui-list-test ui-list-link ui-list-active ui-border-tb with-top-nav">
        {% for address in address_list %}
            <li class="ui-border-t" data-edit-url="{{ url_for('user.address_edit_view', _suffix='', address=address.id) }}">
                <div class="ui-list-info">
                    <h1 class="ui-nowrap">{{ address.name }} ({{ address.phone }})</h1>
                    <p class="ui-nowrap">
                        <strong>{{ address.apartment.campus.name }}</strong>
                        {{ address.apartment.name }}
                    </p>
                </div>
            </li>
        {% endfor %}
        <li class="ui-border-t">
            <div class="ui-list-info">
                <h1 class="ui-nowrap"></h1>
                <a href="{{ url_for('user.address_edit_view', _suffix='') }}">
                    <p class="ui-nowrap">添加新地址</p>
                </a>
            </div>
        </li>
    </ul>
{% endblock %}
{% block body_footer %}
    {{ super() }}
{% endblock %}
{% block body_src %}
    {{ super() }}
{% endblock %}
{% block body_js %}
    {{ super() }}
    <script type="text/javascript">
        $(function() {
            $('#address-list').on('click', '[data-edit-url]', function() {
                var $item = $(this);
                location.href = $item.attr('data-edit-url');
            });
        });
    </script>
{% endblock %}
{% block body_after_src %}
    {{ super() }}
{% endblock %}
